#!/bin/sh

# wrapper around swaymsg to alternate output screen

# Get list of active outputs
outputs=$(swaymsg -t get_outputs | grep '"name"' | sed 's/.*"name": "\(.*\)",/\1/')

# Get the first active output as current
current=$(echo "$outputs" | head -n1)

# Find next output in the list
found=false
for output in $outputs; do
    if $found; then
        swaymsg output "$current" disable
        swaymsg output "$output" enable
        exit
    fi
    if [ "$output" = "$current" ]; then
        found=true
    fi
done

# If we're at the last output, wrap to the first
next_output=$(echo "$outputs" | head -n1)
swaymsg output "$current" disable
swaymsg output "$next_output" enable
